<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>zentity - Matcher Parameters</title>
    <meta name="viewport" content="width=device-width, initial-scale=0.8"/>
    <meta name="description" content="zentity brings entity resolution to Elasticsearch. Connect the hidden fragments of an identity in your data. Fast, scalable, open source."/>
    <meta property="og:title" content="zentity - Entity Resolution for Elasticsearch"/>
    <meta property="og:description" content="Connect the hidden fragments of an identity in your data. Fast, scalable, open source."/>
    <meta property="og:image" content="/img/zentity-og-image.png"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://zentity.io/"/>
    <meta name="twitter:title" content="zentity - Entity Resolution for Elasticsearch"/>
    <meta name="twitter:description" content="Connect the hidden fragments of an identity in your data. Fast, scalable, open source."/>
    <link rel="icon" type="image/x-icon" href="/img/favicon.ico"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet"/>
    <link rel="stylesheet" href="/css/all.css?id=601711543"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-27325874-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-27325874-2');
      var to = function(uri, event_category) {
        gtag('event', 'click', {
          'event_category': event_category,
          'event_label': uri,
          'transport_type': 'beacon',
          'event_callback': function(){document.location = uri;}
        });
      };
    </script><script src="/js/all.js?id=849383343"></script>
  </head>
  <body>
    <div id="app" >
      <div id="top"><div id="nav">
          <div style="max-width:950px;margin:0 auto;">
            <a href="/">
              <h1 aria-label="zentity">
                <span style="color:rgb(0,169,224)">z</span><span style="color:rgb(14,119,205)">en</span><span style="color:rgb(31,73,125)">tity</span>
              </h1>
            </a>
            <div id="buttons">
              <a href="/docs">
                <button type="button" class="btn btn-sm btn-primary" aria-label="Documentation">
                  Documentation
                </button>
              </a>
              <a href="/releases">
                <button type="button" class="btn btn-sm btn-link" aria-label="Releases">
                  Releases
                </button>
              </a>
              <a href="https://github.com/zentity-io/zentity" title="Github" onclick="to('https://github.com/zentity-io/zentity');">
                <button type="button" class="btn btn-sm btn-link" aria-label="Github">
                  Github
                </button>
              </a>
            </div>
          </div>
        </div></div>
      <div id="main" class="content">
        <p><a href="/">Home</a> / <a href="/docs">Documentation</a> / <a href="/docs/advanced-usage">Advanced Usage</a> / Matcher Parameters</p>
<h4><a name="contents"></a>Advanced Usage Tutorials ðŸ“–</h4>
<p>This tutorial is part of a series to help you learn and perform the advanced
functions of zentity. You should complete the <a href="/docs/basic-usage">basic usage</a>
tutorials before completing these advanced usage tutorials.</p>
<ol>
<li><strong>Matcher Parameters</strong> <em>&#8592; You are here.</em></li>
<li><a href="/docs/advanced-usage/date-attributes">Date Attributes</a></li>
<li><a href="/docs/advanced-usage/payload-attributes">Payload Attributes</a></li>
</ol>
<hr>
<h1><a name="matcher-parameters"></a>Matcher Parameters</h1>
<p>You can parameterize any <strong><a href="/docs/entity-models/specification#matchers.MATCHER_NAME.clause"><code>"clause"</code></a></strong>
in the the <strong><a href="/docs/entity-models/specification#matchers"><code>"matchers"</code></a></strong> object
of an entity model. Matcher parameters (<strong><a href="/docs/entity-models/specification#matchers.MATCHER_NAME.params"><code>"params"</code></a></strong>)
are variables that allow you to pass arbitrary values from the attribute to the
matcher. This gives you more flexibility and control over the matching process
when you run a resolution job.</p>
<p>This tutorial will show how to define and override matcher parameters to modify
the behavior of matchers at runtime.</p>
<p>Let's dive in.</p>
<blockquote><p><strong>Important</strong></p>
<p>You must install <a href="https://www.elastic.co/downloads/elasticsearch" onclick="to('https://www.elastic.co/downloads/elasticsearch', 'outbound');" class="external">Elasticsearch</a>, <a href="https://www.elastic.co/downloads/kibana" onclick="to('https://www.elastic.co/downloads/kibana', 'outbound');" class="external">Kibana</a>, and <a href="/docs/installation">zentity</a> to complete this tutorial.
This tutorial was tested with <a href="/docs/releases">zentity-1.0.2-elasticsearch-6.7.0</a>.</p>
</blockquote>
<h2><a name="prepare"></a>1. Prepare for the tutorial</h2>
<h3><a name="open-kibana-console-ui"></a>1.1 Open the Kibana Console UI</h3>
<p>The <a href="https://www.elastic.co/guide/en/kibana/current/console-kibana.html" onclick="to('https://www.elastic.co/guide/en/kibana/current/console-kibana.html', 'outbound');" class="external">Kibana Console UI</a> makes it easy to submit requests to Elasticsearch and read responses.</p>
<h3><a name="delete-old-tutorial-indices"></a>1.2 Delete any old tutorial indices</h3>
<p>Let's start from scratch. Delete any tutorial indices you might have created from other tutorials.</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a7da92adae9cdaa34">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a7da92adae9cdaa34"><div class="highlight"><pre><span></span><span class="nx">DELETE</span> <span class="p">.</span><span class="nx">zentity</span><span class="o">-</span><span class="nx">tutorial</span><span class="o">-*</span>
</pre></div>
</span>
        </div>
        <h3><a name="create-tutorial-index"></a>1.3 Create the tutorial index</h3>
<p>Now create the index for this tutorial.</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#ad4e872a06ec90bf3">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="ad4e872a06ec90bf3"><div class="highlight"><pre><span></span><span class="nx">PUT</span> <span class="p">.</span><span class="nx">zentity</span><span class="o">-</span><span class="nx">tutorial</span><span class="o">-</span><span class="nx">index</span>
<span class="p">{</span>
  <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;index&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;number_of_shards&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="s2">&quot;number_of_replicas&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;analysis&quot;</span> <span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;filter&quot;</span> <span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;punct_white&quot;</span> <span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;pattern&quot;</span> <span class="o">:</span> <span class="s2">&quot;\\p{Punct}&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="s2">&quot;pattern_replace&quot;</span><span class="p">,</span>
            <span class="s2">&quot;replacement&quot;</span> <span class="o">:</span> <span class="s2">&quot; &quot;</span>
          <span class="p">},</span>
          <span class="s2">&quot;remove_non_digits&quot;</span> <span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;pattern&quot;</span> <span class="o">:</span> <span class="s2">&quot;[^\\d]&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span> <span class="o">:</span> <span class="s2">&quot;pattern_replace&quot;</span><span class="p">,</span>
            <span class="s2">&quot;replacement&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="s2">&quot;analyzer&quot;</span> <span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;name_clean&quot;</span> <span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;filter&quot;</span> <span class="o">:</span> <span class="p">[</span>
              <span class="s2">&quot;lowercase&quot;</span><span class="p">,</span>
              <span class="s2">&quot;punct_white&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;tokenizer&quot;</span> <span class="o">:</span> <span class="s2">&quot;standard&quot;</span>
          <span class="p">},</span>
          <span class="s2">&quot;phone_clean&quot;</span> <span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;filter&quot;</span> <span class="o">:</span> <span class="p">[</span>
              <span class="s2">&quot;remove_non_digits&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;tokenizer&quot;</span> <span class="o">:</span> <span class="s2">&quot;keyword&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;mappings&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;_doc&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;keyword&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;first_name&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
          <span class="s2">&quot;fields&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;clean&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
              <span class="s2">&quot;analyzer&quot;</span><span class="o">:</span> <span class="s2">&quot;name_clean&quot;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="s2">&quot;last_name&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
          <span class="s2">&quot;fields&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;clean&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
              <span class="s2">&quot;analyzer&quot;</span><span class="o">:</span> <span class="s2">&quot;name_clean&quot;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="s2">&quot;phone&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
          <span class="s2">&quot;fields&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;clean&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
              <span class="s2">&quot;analyzer&quot;</span><span class="o">:</span> <span class="s2">&quot;phone_clean&quot;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <h3><a name="load-tutorial-data"></a>1.4 Load the tutorial data</h3>
<p>Add the tutorial data to the index.</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a5e45f2096ca513e2">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a5e45f2096ca513e2"><div class="highlight"><pre><span></span><span class="nx">POST</span> <span class="nx">_bulk</span><span class="o">?</span><span class="nx">refresh</span>
<span class="p">{</span><span class="s2">&quot;index&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="o">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;_index&quot;</span><span class="o">:</span> <span class="s2">&quot;.zentity-tutorial-index&quot;</span><span class="p">,</span> <span class="s2">&quot;_type&quot;</span><span class="o">:</span> <span class="s2">&quot;_doc&quot;</span><span class="p">}}</span>
<span class="p">{</span><span class="s2">&quot;first_name&quot;</span><span class="o">:</span> <span class="s2">&quot;Allie&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="s2">&quot;last_name&quot;</span><span class="o">:</span> <span class="s2">&quot;Jones&quot;</span><span class="p">,</span> <span class="s2">&quot;phone&quot;</span><span class="o">:</span> <span class="s2">&quot;202-555-1234&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;index&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="o">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;_index&quot;</span><span class="o">:</span> <span class="s2">&quot;.zentity-tutorial-index&quot;</span><span class="p">,</span> <span class="s2">&quot;_type&quot;</span><span class="o">:</span> <span class="s2">&quot;_doc&quot;</span><span class="p">}}</span>
<span class="p">{</span><span class="s2">&quot;first_name&quot;</span><span class="o">:</span> <span class="s2">&quot;Alicia&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;last_name&quot;</span><span class="o">:</span> <span class="s2">&quot;Johnson&quot;</span><span class="p">,</span> <span class="s2">&quot;phone&quot;</span><span class="o">:</span> <span class="s2">&quot;202-123-4567&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;index&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="o">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;_index&quot;</span><span class="o">:</span> <span class="s2">&quot;.zentity-tutorial-index&quot;</span><span class="p">,</span> <span class="s2">&quot;_type&quot;</span><span class="o">:</span> <span class="s2">&quot;_doc&quot;</span><span class="p">}}</span>
<span class="p">{</span><span class="s2">&quot;first_name&quot;</span><span class="o">:</span> <span class="s2">&quot;Allie&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;last_name&quot;</span><span class="o">:</span> <span class="s2">&quot;Joans&quot;</span><span class="p">,</span> <span class="s2">&quot;phone&quot;</span><span class="o">:</span> <span class="s2">&quot;202-555-1432&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;index&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="o">:</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="s2">&quot;_index&quot;</span><span class="o">:</span> <span class="s2">&quot;.zentity-tutorial-index&quot;</span><span class="p">,</span> <span class="s2">&quot;_type&quot;</span><span class="o">:</span> <span class="s2">&quot;_doc&quot;</span><span class="p">}}</span>
<span class="p">{</span><span class="s2">&quot;first_name&quot;</span><span class="o">:</span> <span class="s2">&quot;Ellie&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="s2">&quot;last_name&quot;</span><span class="o">:</span> <span class="s2">&quot;Jones&quot;</span><span class="p">,</span> <span class="s2">&quot;phone&quot;</span><span class="o">:</span> <span class="s2">&quot;202-555-1234&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s2">&quot;index&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;_id&quot;</span><span class="o">:</span> <span class="s2">&quot;5&quot;</span><span class="p">,</span> <span class="s2">&quot;_index&quot;</span><span class="o">:</span> <span class="s2">&quot;.zentity-tutorial-index&quot;</span><span class="p">,</span> <span class="s2">&quot;_type&quot;</span><span class="o">:</span> <span class="s2">&quot;_doc&quot;</span><span class="p">}}</span>
<span class="p">{</span><span class="s2">&quot;first_name&quot;</span><span class="o">:</span> <span class="s2">&quot;Ali&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;5&quot;</span><span class="p">,</span> <span class="s2">&quot;last_name&quot;</span><span class="o">:</span> <span class="s2">&quot;Jones&quot;</span><span class="p">,</span> <span class="s2">&quot;phone&quot;</span><span class="o">:</span> <span class="s2">&quot;202-555-1234&quot;</span><span class="p">}</span>
</pre></div>
</span>
        </div>
        <p>Here's what the tutorial data looks like.</p>
<table class="table">
<thead><tr>
<th style="text-align:left">id</th>
<th style="text-align:left">first_name</th>
<th style="text-align:left">last_name</th>
<th style="text-align:left">phone</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">1</td>
<td style="text-align:left">Allie</td>
<td style="text-align:left">Jones</td>
<td style="text-align:left">202-555-1234</td>
</tr>
<tr>
<td style="text-align:left">2</td>
<td style="text-align:left">Alicia</td>
<td style="text-align:left">Johnson</td>
<td style="text-align:left">202-123-4567</td>
</tr>
<tr>
<td style="text-align:left">3</td>
<td style="text-align:left">Allie</td>
<td style="text-align:left">Joans</td>
<td style="text-align:left">202-555-1423</td>
</tr>
<tr>
<td style="text-align:left">4</td>
<td style="text-align:left">Ellie</td>
<td style="text-align:left">Jones</td>
<td style="text-align:left">202-555-1234</td>
</tr>
<tr>
<td style="text-align:left">5</td>
<td style="text-align:left">Ali</td>
<td style="text-align:left">Jones</td>
<td style="text-align:left">202-555-1234</td>
</tr>
</tbody>
</table>
<h2><a name="create-entity-model"></a>2. Create the entity model</h2>
<p>Let's use the <a href="/docs/rest-apis/models-api">Models API</a> to create the entity model below. We'll review the matchers in depth.</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a48a355f642a6418c">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a48a355f642a6418c"><div class="highlight"><pre><span></span><span class="nx">PUT</span> <span class="nx">_zentity</span><span class="o">/</span><span class="nx">models</span><span class="o">/</span><span class="nx">zentity</span><span class="o">-</span><span class="nx">tutorial</span><span class="o">-</span><span class="nx">person</span>
<span class="p">{</span>
  <span class="s2">&quot;attributes&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;first_name&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;last_name&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;phone&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;string&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;resolvers&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;name_phone&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;attributes&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;first_name&quot;</span><span class="p">,</span> <span class="s2">&quot;last_name&quot;</span><span class="p">,</span> <span class="s2">&quot;phone&quot;</span> <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;matchers&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;fuzzy&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;clause&quot;</span><span class="o">:</span><span class="p">{</span>
        <span class="s2">&quot;match&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;{{ field }}&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;query&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ value }}&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fuzziness&quot;</span><span class="o">:</span> <span class="s2">&quot;auto&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;fuzzy_params&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;clause&quot;</span><span class="o">:</span><span class="p">{</span>
        <span class="s2">&quot;match&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;{{ field }}&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;query&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ value }}&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fuzziness&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ params.fuzziness }}&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="s2">&quot;params&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;fuzziness&quot;</span><span class="o">:</span> <span class="s2">&quot;auto&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;indices&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;.zentity-tutorial-index&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;fields&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;first_name.clean&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;attribute&quot;</span><span class="o">:</span> <span class="s2">&quot;first_name&quot;</span><span class="p">,</span>
          <span class="s2">&quot;matcher&quot;</span><span class="o">:</span> <span class="s2">&quot;fuzzy_params&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;last_name.clean&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;attribute&quot;</span><span class="o">:</span> <span class="s2">&quot;last_name&quot;</span><span class="p">,</span>
          <span class="s2">&quot;matcher&quot;</span><span class="o">:</span> <span class="s2">&quot;fuzzy_params&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;phone.clean&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;attribute&quot;</span><span class="o">:</span> <span class="s2">&quot;phone&quot;</span><span class="p">,</span>
          <span class="s2">&quot;matcher&quot;</span><span class="o">:</span> <span class="s2">&quot;fuzzy_params&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <h3><a name="review-matchers"></a>2.1 Review the matchers</h3>
<p>We defined two matchers called <code>"fuzzy"</code> and <code>"fuzzy_params"</code> as shown in this section:</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a256b1599022885c0">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a256b1599022885c0"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;matchers&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;fuzzy&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;clause&quot;</span><span class="o">:</span><span class="p">{</span>
        <span class="s2">&quot;match&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;{{ field }}&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;query&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ value }}&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fuzziness&quot;</span><span class="o">:</span> <span class="s2">&quot;auto&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;fuzzy_params&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;clause&quot;</span><span class="o">:</span><span class="p">{</span>
        <span class="s2">&quot;match&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;{{ field }}&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;query&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ value }}&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fuzziness&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ params.fuzziness }}&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="s2">&quot;params&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;fuzziness&quot;</span><span class="o">:</span> <span class="s2">&quot;auto&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <p>These matchers are nearly identical. Both will perform the same fuzzy matching
logic by default. But the <code>"fuzzy_params"</code> matcher uses <code>"params"</code> to turn the
<code>"fuzziness"</code> field into a variable.</p>
<p>According to the <a href="/docs/entity-models/specification">entity model specification</a>,
the <a href="/docs/entity-models/specification#matchers.MATCHER_NAME.clause"><code>"clause"</code></a>
of any matcher requires two variables:</p>
<blockquote><p>Matcher clauses use Mustache syntax to pass two important variables: <strong><code>{{ field }}</code></strong> and <strong><code>{{ value }}</code></strong>. The <code>field</code> variable will be populated with the index field that maps to the attribute. The <code>value</code> field will be populated with the value that will be queried for that attribute. This syntax is the same as the one used by Elasticsearch <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-template.html" onclick="to('https://www.elastic.co/guide/en/elasticsearch/reference/current/search-template.html', 'outbound');" class="external">search templates</a>.</p>
</blockquote>
<p>Let's look at our <code>"fuzzy"</code> matcher. This matcher uses no params.</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a9d13742097d3b14f">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a9d13742097d3b14f"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;matchers&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;fuzzy&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;clause&quot;</span><span class="o">:</span><span class="p">{</span>
        <span class="s2">&quot;match&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;{{ field }}&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;query&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ value }}&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fuzziness&quot;</span><span class="o">:</span> <span class="s2">&quot;auto&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <p>Additional variables or "params" can be passed to the matcher using the syntax
<strong><code>{{ params.PARAM_NAME }}</code></strong> where <code>PARAM_NAME</code> is the name of your parameter.
You must define the default values for each parameter in the <a href="/docs/entity-models/specification#matchers.MATCHER_NAME.params"><code>"params"</code></a>
object adjacent to the <a href="/docs/entity-models/specification#matchers.MATCHER_NAME.clause"><code>"clause"</code></a>
object of a matcher.</p>
<p>Now let's look at our <code>"fuzzy_params"</code> matcher. This matcher uses <code>"params"</code> to
allow the <code>"fuzziness"</code> field of the <code>match</code> clause to be changed at runtime.</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a4e0c7e98ab0a4f1b">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a4e0c7e98ab0a4f1b"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;matchers&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;fuzzy_params&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;clause&quot;</span><span class="o">:</span><span class="p">{</span>
        <span class="s2">&quot;match&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;{{ field }}&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;query&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ value }}&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fuzziness&quot;</span><span class="o">:</span> <span class="s2">&quot;{{ params.fuzziness }}&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="s2">&quot;params&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;fuzziness&quot;</span><span class="o">:</span> <span class="s2">&quot;auto&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <p>Now that we have defined a matcher with parameters, let's see how we can
override the default values of those parameters.</p>
<h2><a name="resolve-entity"></a>3. Resolve an entity</h2>
<p>Let's use the <a href="/docs/rest-apis/resolution-api">Resolution API</a> to resolve a
person with a known first name, last name, and phone number:</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a22ec3b808a3e3347">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a22ec3b808a3e3347"><div class="highlight"><pre><span></span><span class="nx">POST</span> <span class="nx">_zentity</span><span class="o">/</span><span class="nx">resolution</span><span class="o">/</span><span class="nx">zentity</span><span class="o">-</span><span class="nx">tutorial</span><span class="o">-</span><span class="nx">person</span><span class="o">?</span><span class="nx">pretty</span><span class="o">&amp;</span><span class="nx">_source</span><span class="o">=</span><span class="kc">false</span>
<span class="p">{</span>
  <span class="s2">&quot;attributes&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;first_name&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;Allie&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;last_name&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;Jones&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;phone&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;202-555-1234&quot;</span> <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <p>The results will look like this:</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a83dfc05d399d9bb7">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a83dfc05d399d9bb7"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;took&quot;</span> <span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
  <span class="s2">&quot;hits&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;total&quot;</span> <span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">&quot;hits&quot;</span> <span class="o">:</span> <span class="p">[</span> <span class="p">{</span>
      <span class="s2">&quot;_index&quot;</span> <span class="o">:</span> <span class="s2">&quot;.zentity-tutorial-index&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_type&quot;</span> <span class="o">:</span> <span class="s2">&quot;_doc&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_hop&quot;</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;_attributes&quot;</span> <span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;first_name&quot;</span> <span class="o">:</span> <span class="s2">&quot;Allie&quot;</span><span class="p">,</span>
        <span class="s2">&quot;last_name&quot;</span> <span class="o">:</span> <span class="s2">&quot;Jones&quot;</span><span class="p">,</span>
        <span class="s2">&quot;phone&quot;</span> <span class="o">:</span> <span class="s2">&quot;202-555-1234&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="s2">&quot;_index&quot;</span> <span class="o">:</span> <span class="s2">&quot;.zentity-tutorial-index&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_type&quot;</span> <span class="o">:</span> <span class="s2">&quot;_doc&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_hop&quot;</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;_attributes&quot;</span> <span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;first_name&quot;</span> <span class="o">:</span> <span class="s2">&quot;Ellie&quot;</span><span class="p">,</span>
        <span class="s2">&quot;last_name&quot;</span> <span class="o">:</span> <span class="s2">&quot;Jones&quot;</span><span class="p">,</span>
        <span class="s2">&quot;phone&quot;</span> <span class="o">:</span> <span class="s2">&quot;202-555-1234&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <p>Only two results were returned. Out of the five documents that exist in the
index, four of them appear to be the entity that we are searching for. We need
to allow more fuzziness to capture those other two documents.</p>
<p>Our <code>"fuzzy_params"</code> matcher uses a <code>"fuzziness"</code> value of <code>"auto"</code>. According
to its <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/common-options.html#fuzziness" onclick="to('https://www.elastic.co/guide/en/elasticsearch/reference/current/common-options.html#fuzziness', 'outbound');" class="external">documentation</a>,
a value of <code>"auto"</code> will match strings that differ by one character if the
strings are 3-5 characters long, and it will match strings that differ by two
characters if the strings are 6+ characters long. The first name and last name
of our entity falls within the range of 3-5 characters, which will allow only
one character difference to match.</p>
<p>Let's set the value of <code>"fuzziness"</code> to <code>2</code> for our <code>"first_name"</code> attribute.</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a000e6af88521d8c8">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a000e6af88521d8c8"><div class="highlight"><pre><span></span><span class="nx">POST</span> <span class="nx">_zentity</span><span class="o">/</span><span class="nx">resolution</span><span class="o">/</span><span class="nx">zentity</span><span class="o">-</span><span class="nx">tutorial</span><span class="o">-</span><span class="nx">person</span><span class="o">?</span><span class="nx">pretty</span><span class="o">&amp;</span><span class="nx">_source</span><span class="o">=</span><span class="kc">false</span>
<span class="p">{</span>
  <span class="s2">&quot;attributes&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;first_name&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;values&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;Allie&quot;</span> <span class="p">],</span>
      <span class="s2">&quot;params&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;fuzziness&quot;</span><span class="o">:</span> <span class="s2">&quot;2&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;last_name&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;Jones&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;phone&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;202-555-1234&quot;</span> <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <p>The results will look like this:</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a4fe5903a82b4ccf4">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a4fe5903a82b4ccf4"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;took&quot;</span> <span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
  <span class="s2">&quot;hits&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;total&quot;</span> <span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s2">&quot;hits&quot;</span> <span class="o">:</span> <span class="p">[</span> <span class="p">{</span>
      <span class="s2">&quot;_index&quot;</span> <span class="o">:</span> <span class="s2">&quot;.zentity-tutorial-index&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_type&quot;</span> <span class="o">:</span> <span class="s2">&quot;_doc&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_hop&quot;</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;_attributes&quot;</span> <span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;first_name&quot;</span> <span class="o">:</span> <span class="s2">&quot;Allie&quot;</span><span class="p">,</span>
        <span class="s2">&quot;last_name&quot;</span> <span class="o">:</span> <span class="s2">&quot;Jones&quot;</span><span class="p">,</span>
        <span class="s2">&quot;phone&quot;</span> <span class="o">:</span> <span class="s2">&quot;202-555-1234&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="s2">&quot;_index&quot;</span> <span class="o">:</span> <span class="s2">&quot;.zentity-tutorial-index&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_type&quot;</span> <span class="o">:</span> <span class="s2">&quot;_doc&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_hop&quot;</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;_attributes&quot;</span> <span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;first_name&quot;</span> <span class="o">:</span> <span class="s2">&quot;Ellie&quot;</span><span class="p">,</span>
        <span class="s2">&quot;last_name&quot;</span> <span class="o">:</span> <span class="s2">&quot;Jones&quot;</span><span class="p">,</span>
        <span class="s2">&quot;phone&quot;</span> <span class="o">:</span> <span class="s2">&quot;202-555-1234&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="s2">&quot;_index&quot;</span> <span class="o">:</span> <span class="s2">&quot;.zentity-tutorial-index&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_type&quot;</span> <span class="o">:</span> <span class="s2">&quot;_doc&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;5&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_hop&quot;</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;_attributes&quot;</span> <span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;first_name&quot;</span> <span class="o">:</span> <span class="s2">&quot;Ali&quot;</span><span class="p">,</span>
        <span class="s2">&quot;last_name&quot;</span> <span class="o">:</span> <span class="s2">&quot;Jones&quot;</span><span class="p">,</span>
        <span class="s2">&quot;phone&quot;</span> <span class="o">:</span> <span class="s2">&quot;202-555-1234&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <p>This returned three of the four matching documents. The first names "Allie" and
"Ali" now match because they differ by two characters.</p>
<p>Let's also set the value of <code>"fuzziness"</code> to <code>2</code> for our <code>"last_name"</code> attribute.</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a96f021bfb6f51103">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a96f021bfb6f51103"><div class="highlight"><pre><span></span><span class="nx">POST</span> <span class="nx">_zentity</span><span class="o">/</span><span class="nx">resolution</span><span class="o">/</span><span class="nx">zentity</span><span class="o">-</span><span class="nx">tutorial</span><span class="o">-</span><span class="nx">person</span><span class="o">?</span><span class="nx">pretty</span><span class="o">&amp;</span><span class="nx">_source</span><span class="o">=</span><span class="kc">false</span>
<span class="p">{</span>
  <span class="s2">&quot;attributes&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;first_name&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;values&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;Allie&quot;</span> <span class="p">],</span>
      <span class="s2">&quot;params&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;fuzziness&quot;</span><span class="o">:</span> <span class="s2">&quot;2&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;last_name&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;values&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;Jones&quot;</span> <span class="p">],</span>
      <span class="s2">&quot;params&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;fuzziness&quot;</span><span class="o">:</span> <span class="s2">&quot;2&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;phone&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;202-555-1234&quot;</span> <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <p>The results will look like this:</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a4a4f1c3285ec8d82">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a4a4f1c3285ec8d82"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;took&quot;</span> <span class="o">:</span> <span class="mi">11</span><span class="p">,</span>
  <span class="s2">&quot;hits&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;total&quot;</span> <span class="o">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="s2">&quot;hits&quot;</span> <span class="o">:</span> <span class="p">[</span> <span class="p">{</span>
      <span class="s2">&quot;_index&quot;</span> <span class="o">:</span> <span class="s2">&quot;.zentity-tutorial-index&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_type&quot;</span> <span class="o">:</span> <span class="s2">&quot;_doc&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_hop&quot;</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;_attributes&quot;</span> <span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;first_name&quot;</span> <span class="o">:</span> <span class="s2">&quot;Allie&quot;</span><span class="p">,</span>
        <span class="s2">&quot;last_name&quot;</span> <span class="o">:</span> <span class="s2">&quot;Jones&quot;</span><span class="p">,</span>
        <span class="s2">&quot;phone&quot;</span> <span class="o">:</span> <span class="s2">&quot;202-555-1234&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="s2">&quot;_index&quot;</span> <span class="o">:</span> <span class="s2">&quot;.zentity-tutorial-index&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_type&quot;</span> <span class="o">:</span> <span class="s2">&quot;_doc&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_hop&quot;</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;_attributes&quot;</span> <span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;first_name&quot;</span> <span class="o">:</span> <span class="s2">&quot;Allie&quot;</span><span class="p">,</span>
        <span class="s2">&quot;last_name&quot;</span> <span class="o">:</span> <span class="s2">&quot;Joans&quot;</span><span class="p">,</span>
        <span class="s2">&quot;phone&quot;</span> <span class="o">:</span> <span class="s2">&quot;202-555-1432&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="s2">&quot;_index&quot;</span> <span class="o">:</span> <span class="s2">&quot;.zentity-tutorial-index&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_type&quot;</span> <span class="o">:</span> <span class="s2">&quot;_doc&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_hop&quot;</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;_attributes&quot;</span> <span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;first_name&quot;</span> <span class="o">:</span> <span class="s2">&quot;Ellie&quot;</span><span class="p">,</span>
        <span class="s2">&quot;last_name&quot;</span> <span class="o">:</span> <span class="s2">&quot;Jones&quot;</span><span class="p">,</span>
        <span class="s2">&quot;phone&quot;</span> <span class="o">:</span> <span class="s2">&quot;202-555-1234&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="p">{</span>
      <span class="s2">&quot;_index&quot;</span> <span class="o">:</span> <span class="s2">&quot;.zentity-tutorial-index&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_type&quot;</span> <span class="o">:</span> <span class="s2">&quot;_doc&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;5&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_hop&quot;</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;_attributes&quot;</span> <span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;first_name&quot;</span> <span class="o">:</span> <span class="s2">&quot;Ali&quot;</span><span class="p">,</span>
        <span class="s2">&quot;last_name&quot;</span> <span class="o">:</span> <span class="s2">&quot;Jones&quot;</span><span class="p">,</span>
        <span class="s2">&quot;phone&quot;</span> <span class="o">:</span> <span class="s2">&quot;202-555-1234&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <p>Now we have all four matching results. The last names "Jones" and "Joans" now 
match because they differ by two characters. The phone number for document <code>"3"</code>
also differs by two characters from the other phone numbers. They matched
because a fuzziness value of <code>"auto"</code> allows two characters to differ when the
length of the strings are greater than or equal to six characters.</p>
<p>What if we disabled <code>"fuzziness"</code> on every attribute? Let's try it.</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a15810f8baf917717">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a15810f8baf917717"><div class="highlight"><pre><span></span><span class="nx">POST</span> <span class="nx">_zentity</span><span class="o">/</span><span class="nx">resolution</span><span class="o">/</span><span class="nx">zentity</span><span class="o">-</span><span class="nx">tutorial</span><span class="o">-</span><span class="nx">person</span><span class="o">?</span><span class="nx">pretty</span><span class="o">&amp;</span><span class="nx">_source</span><span class="o">=</span><span class="kc">false</span>
<span class="p">{</span>
  <span class="s2">&quot;attributes&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;first_name&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;values&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;Allie&quot;</span> <span class="p">],</span>
      <span class="s2">&quot;params&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;fuzziness&quot;</span><span class="o">:</span> <span class="s2">&quot;0&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;last_name&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;values&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;Jones&quot;</span> <span class="p">],</span>
      <span class="s2">&quot;params&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;fuzziness&quot;</span><span class="o">:</span> <span class="s2">&quot;0&quot;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;phone&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;values&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;202-555-1234&quot;</span> <span class="p">],</span>
      <span class="s2">&quot;params&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;fuzziness&quot;</span><span class="o">:</span> <span class="s2">&quot;0&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <p>The results will look like this:</p>

        <div class="code">
          <button type="button" class="btn btn-sm btn-link copy" data-clipboard-target="#a277b94dec3a318e6">
            <span style="font-size:24px;">&#x2398</span> Copy to clipboard
          </button>
          <span id="a277b94dec3a318e6"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;took&quot;</span> <span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="s2">&quot;hits&quot;</span> <span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;total&quot;</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;hits&quot;</span> <span class="o">:</span> <span class="p">[</span> <span class="p">{</span>
      <span class="s2">&quot;_index&quot;</span> <span class="o">:</span> <span class="s2">&quot;.zentity-tutorial-index&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_type&quot;</span> <span class="o">:</span> <span class="s2">&quot;_doc&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
      <span class="s2">&quot;_hop&quot;</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;_attributes&quot;</span> <span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;first_name&quot;</span> <span class="o">:</span> <span class="s2">&quot;Allie&quot;</span><span class="p">,</span>
        <span class="s2">&quot;last_name&quot;</span> <span class="o">:</span> <span class="s2">&quot;Jones&quot;</span><span class="p">,</span>
        <span class="s2">&quot;phone&quot;</span> <span class="o">:</span> <span class="s2">&quot;202-555-1234&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</span>
        </div>
        <p>Only one document matched because every attribute matched our inputs exactly.</p>
<h2><a name="conclusion"></a>Conclusion</h2>
<p>You learned how to parameterize the clauses of matchers in entity models. This
gives you the ability to modify the behavior of matchers at runtime.</p>
<p>The next tutorial will introduce <a href="/docs/advanced-usage/date-attributes">date attributes</a>,
which require matcher parameters and can be used to match both points in time
and ranges of time.</p>
<p>&nbsp;</p>
<hr>
<h4>Continue Reading</h4>
<table class="table">
<thead><tr>
<th style="text-align:left">&#8249;</th>
<th style="text-align:left"><a href="/docs/advanced-usage">Advanced Usage</a></th>
<th style="text-align:right"><a href="/docs/advanced-usage/date-attributes">Date Attributes</a></th>
<th style="text-align:right">&#8250;</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td style="text-align:right"></td>
<td style="text-align:right"></td>
</tr>
</tbody>
</table>

      </div>
      <div id="bottom">
        <small>
          <div>
            &copy; 2018 <a href="https://github.com/davemoore-" title="Dave Moore" onclick="to('https://github.com/davemoore-');">Dave Moore</a>.
          </div>
          <div>
            Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0" onclick="to('http://www.apache.org/licenses/LICENSE-2.0');">Apache License, Version 2.0</a>.
          </div>
          <div>
            Elasticsearch is a trademark of Elasticsearch BV.
          </div>
          <div>
            This website uses Google Analytics.</div>
        </small>
      </div>
    </div>
  </body>
  <script>$(document).ready(function(){ new ClipboardJS('.copy'); });</script>
</html>
